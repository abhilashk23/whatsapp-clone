{"ast":null,"code":"var _jsxFileName = \"/Users/abhilashkhuntia/Desktop/whatsapp-clone/src/Sidebar.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Avatar, Collapse, IconButton } from \"@material-ui/core\";\nimport DonutLargeIcon from \"@material-ui/icons/DonutLarge\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\nimport SearchOutlined from \"@material-ui/icons/SearchOutlined\";\nimport SidebarChat from \"./SidebarChat\";\nimport \"./Sidebar.css\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport db from \"./firebase\";\nimport { useStateValue } from \"./StateProvider\";\nimport { actionTypes } from \"./reducer\";\nimport UseWindowDimensions from \"./UseWindowDimensions\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\n\nfunction Sidebar() {\n  const [rooms, setRooms] = useState([]);\n  const [toggler, setToggler] = useState(false);\n  const [sidebarBool, setsidebarBool] = useState(true);\n  const [{\n    togglerState\n  }, dispatch] = useStateValue();\n  const [search, setSearch] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [logout, setLogout] = useState(false);\n  const {\n    width\n  } = UseWindowDimensions();\n\n  const matcher = (s, values) => {\n    const re = RegExp(`.*${s.toLowerCase().split(\"\").join(\".*\")}.*`);\n    return values.filter(v => v.data.name.toLowerCase().match(re));\n  };\n\n  const handleChange = e => {\n    setsidebarBool(false);\n    setInput(e.target.value);\n  };\n\n  const exitApp = () => {\n    localStorage.removeItem(\"uid\");\n    window.location.reload();\n    setLogout(true);\n  };\n\n  useEffect(() => {\n    if (rooms.length > 0) {\n      setSearch(matcher(input, rooms));\n    }\n\n    if (input === \"\") {\n      setsidebarBool(true);\n    }\n  }, [input]);\n  useEffect(() => {\n    const unsubscribe = db.collection(\"rooms\").orderBy(\"timestamp\", \"desc\").onSnapshot(snapshot => {\n      setRooms(snapshot.docs.map(doc => ({\n        id: doc.id,\n        data: doc.data()\n      })));\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n  useEffect(() => {\n    setToggler(!toggler);\n  }, [togglerState]);\n\n  const handleDrawerToggle = () => {\n    setToggler(toggler);\n    dispatch({\n      type: actionTypes.SET_TOGGLER,\n      togglerState: togglerState + 1\n    });\n  };\n\n  const photoURL = localStorage.getItem(\"photoURL\") !== \"\" ? localStorage.getItem(\"photoURL\") : null;\n  const displayName = localStorage.getItem(\"displayName\");\n  return /*#__PURE__*/React.createElement(React.Fragment, null, width < 629 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: togglerState % 2 !== 0 ? \"sidebar\" : \"sidebar hide__sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"siderbar__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    color: \"inherit\",\n    \"aria-label\": \"open drawer\",\n    edge: \"start\",\n    className: \"sidebar__burger\",\n    onClick: handleDrawerToggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MenuIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: photoURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__headerRight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, displayName), /*#__PURE__*/React.createElement(IconButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: exitApp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(ExitToAppIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__searchContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SearchOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Search or Start a new chat\",\n    value: input,\n    type: \"text\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }))), sidebarBool ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__chats\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SidebarChat, {\n    addNewChatVal: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }), rooms.map(room => /*#__PURE__*/React.createElement(SidebarChat, {\n    key: room.id,\n    id: room.id,\n    name: room.data.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__chats\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SidebarChat, {\n    addNewChatVal: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  }), search.map(room => /*#__PURE__*/React.createElement(SidebarChat, {\n    key: room.id,\n    id: room.id,\n    name: room.data.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  })))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: photoURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__headerRight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, displayName), /*#__PURE__*/React.createElement(IconButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: exitApp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ExitToAppIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 19\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__searchContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SearchOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Search or Start a new chat\",\n    value: input,\n    type: \"text\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }))), sidebarBool ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__chats scrollbar-juicy-peach\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SidebarChat, {\n    addNewChatVal: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }), rooms.length == 0 ? /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }) : rooms.map(room => /*#__PURE__*/React.createElement(SidebarChat, {\n    key: room.id,\n    id: room.id,\n    name: room.data.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 19\n    }\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar__chats \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SidebarChat, {\n    addNewChatVal: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }), search.map(room => /*#__PURE__*/React.createElement(SidebarChat, {\n    key: room.id,\n    id: room.id,\n    name: room.data.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  })))));\n}\n\nexport default Sidebar;","map":{"version":3,"sources":["/Users/abhilashkhuntia/Desktop/whatsapp-clone/src/Sidebar.js"],"names":["React","useState","useEffect","Avatar","Collapse","IconButton","DonutLargeIcon","ChatIcon","SearchOutlined","SidebarChat","MenuIcon","db","useStateValue","actionTypes","UseWindowDimensions","ExitToAppIcon","Sidebar","rooms","setRooms","toggler","setToggler","sidebarBool","setsidebarBool","togglerState","dispatch","search","setSearch","input","setInput","logout","setLogout","width","matcher","s","values","re","RegExp","toLowerCase","split","join","filter","v","data","name","match","handleChange","e","target","value","exitApp","localStorage","removeItem","window","location","reload","length","unsubscribe","collection","orderBy","onSnapshot","snapshot","docs","map","doc","id","handleDrawerToggle","type","SET_TOGGLER","photoURL","getItem","displayName","room"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Avatar, Collapse, IconButton } from \"@material-ui/core\";\nimport DonutLargeIcon from \"@material-ui/icons/DonutLarge\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\nimport SearchOutlined from \"@material-ui/icons/SearchOutlined\";\nimport SidebarChat from \"./SidebarChat\";\nimport \"./Sidebar.css\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport db from \"./firebase\";\nimport { useStateValue } from \"./StateProvider\";\nimport { actionTypes } from \"./reducer\";\nimport UseWindowDimensions from \"./UseWindowDimensions\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\n\nfunction Sidebar() {\n  const [rooms, setRooms] = useState([]);\n  const [toggler, setToggler] = useState(false);\n  const [sidebarBool, setsidebarBool] = useState(true);\n  const [{ togglerState }, dispatch] = useStateValue();\n  const [search, setSearch] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [logout, setLogout] = useState(false);\n  const { width } = UseWindowDimensions();\n  const matcher = (s, values) => {\n    const re = RegExp(`.*${s.toLowerCase().split(\"\").join(\".*\")}.*`);\n    return values.filter((v) => v.data.name.toLowerCase().match(re));\n  };\n  const handleChange = (e) => {\n    setsidebarBool(false);\n    setInput(e.target.value);\n  };\n  const exitApp = () => {\n    localStorage.removeItem(\"uid\");\n    window.location.reload();\n    setLogout(true);\n  };\n  useEffect(() => {\n    if (rooms.length > 0) {\n      setSearch(matcher(input, rooms));\n    }\n    if (input === \"\") {\n      setsidebarBool(true);\n    }\n  }, [input]);\n\n  useEffect(() => {\n    const unsubscribe = db\n      .collection(\"rooms\")\n      .orderBy(\"timestamp\", \"desc\")\n      .onSnapshot((snapshot) => {\n        setRooms(\n          snapshot.docs.map((doc) => ({\n            id: doc.id,\n            data: doc.data(),\n          }))\n        );\n      });\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n\n  useEffect(() => {\n    setToggler(!toggler);\n  }, [togglerState]);\n  const handleDrawerToggle = () => {\n    setToggler(toggler);\n\n    dispatch({\n      type: actionTypes.SET_TOGGLER,\n      togglerState: togglerState + 1,\n    });\n  };\n  const photoURL =\n    localStorage.getItem(\"photoURL\") !== \"\"\n      ? localStorage.getItem(\"photoURL\")\n      : null;\n  const displayName = localStorage.getItem(\"displayName\");\n\n  return (\n    <>\n      {width < 629 ? (\n        <div\n          className={\n            togglerState % 2 !== 0 ? \"sidebar\" : \"sidebar hide__sidebar\"\n          }\n        >\n          <div className=\"siderbar__wrapper\">\n            <IconButton\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              edge=\"start\"\n              className=\"sidebar__burger\"\n              onClick={handleDrawerToggle}\n            >\n              <MenuIcon />\n            </IconButton>\n            <div className=\"sidebar__header\">\n              <Avatar src={photoURL} />{\" \"}\n              <div className=\"sidebar__headerRight\">\n                <h2>{displayName}</h2>\n                <IconButton>\n                  <div onClick={exitApp}>\n                    <ExitToAppIcon />\n                  </div>\n                </IconButton>\n              </div>\n            </div>\n          </div>\n          <div className=\"sidebar__search\">\n            <div className=\"sidebar__searchContainer\">\n              <SearchOutlined />\n              <input\n                placeholder=\"Search or Start a new chat\"\n                value={input}\n                type=\"text\"\n                onChange={handleChange}\n              />\n            </div>\n          </div>\n          {sidebarBool ? (\n            <div className=\"sidebar__chats\">\n              <SidebarChat addNewChatVal=\"true\" />\n              {rooms.map((room) => (\n                <SidebarChat key={room.id} id={room.id} name={room.data.name} />\n              ))}\n            </div>\n          ) : (\n            <div className=\"sidebar__chats\">\n              <SidebarChat addNewChatVal=\"true\" />\n              {search.map((room) => (\n                <SidebarChat key={room.id} id={room.id} name={room.data.name} />\n              ))}\n            </div>\n          )}\n        </div>\n      ) : (\n        <div className={\"sidebar\"}>\n          <div className=\"sidebar__header\">\n            <Avatar src={photoURL} />\n            <div className=\"sidebar__headerRight\">\n            <h2>{displayName}</h2>\n              <IconButton>\n                <div onClick={exitApp}>\n                  <ExitToAppIcon />\n                </div>\n              </IconButton>\n            </div>\n          </div>\n          <div className=\"sidebar__search\">\n            <div className=\"sidebar__searchContainer\">\n              <SearchOutlined />\n              <input\n                placeholder=\"Search or Start a new chat\"\n                value={input}\n                type=\"text\"\n                onChange={handleChange}\n              />\n            </div>\n          </div>\n          {sidebarBool ? (\n            <div className=\"sidebar__chats scrollbar-juicy-peach\">\n              <SidebarChat addNewChatVal=\"true\" />\n              {rooms.length == 0 ? (\n                <h1></h1>\n              ) : (\n                rooms.map((room) => (\n                  <SidebarChat\n                    key={room.id}\n                    id={room.id}\n                    name={room.data.name}\n                  />\n                ))\n              )}\n            </div>\n          ) : (\n            <div className=\"sidebar__chats \">\n              <SidebarChat addNewChatVal=\"true\" />\n              {search.map((room) => (\n                <SidebarChat key={room.id} id={room.id} name={room.data.name} />\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default Sidebar;\n"]},"metadata":{},"sourceType":"module"}